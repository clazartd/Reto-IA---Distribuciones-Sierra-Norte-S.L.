<div class="custom-modal-backdrop" *ngIf="isOpen"></div>
<div class="custom-modal" *ngIf="isOpen">
  <div class="custom-modal-dialog rounded-4 border shadow bg-white">
    <div class="d-flex justify-content-between align-items-center border-bottom px-4 py-2">
      <h5 class="modal-title fw-bold mb-0">{{ producto ? 'Editar Producto' : 'Nuevo Producto' }}</h5>
      <button class="btn-close" (click)="onCancel()" type="button" aria-label="Cerrar"></button>
    </div>
    <form [formGroup]="form" class="p-4 pt-3" (ngSubmit)="onSave()">
      <div class="mb-3">
        <label class="form-label fw-bold">Nombre *</label>
        <input formControlName="nombre" class="form-control" placeholder="Nombre del producto" maxlength="100" />
      </div>
      <div class="mb-3">
        <label class="form-label fw-bold">Descripción</label>
        <textarea formControlName="descripcion" class="form-control" rows="2" placeholder="Descripción detallada del producto"></textarea>
      </div>
      <div class="row mb-3">
        <div class="col-6">
          <label class="form-label fw-bold">Unidad de Medida *</label>
          <select class="form-select" formControlName="unidadMedida">
            <option value="" disabled>Selecciona unidad</option>
            <option value="kg">kg</option>
            <option value="g">g</option>
            <option value="L">L</option>
            <option value="ud">unidad</option>
          </select>
        </div>
        <div class="col-6">
          <label class="form-label fw-bold">Precio de Referencia (€)</label>
          <input formControlName="precioReferencia" class="form-control" type="number" step="0.01" min="0" placeholder="0.00" />
        </div>
      </div>
      <div class="form-check mb-4 ps-0">
        <label class="form-check-label ms-2">
          <input class="form-check-input" type="checkbox" formControlName="disponible" />
          Disponible
        </label>
      </div>
      <div class="d-flex justify-content-end gap-2">
        <button type="button" class="btn btn-outline-secondary" (click)="onCancel()">Cancelar</button>
        <button type="submit" [disabled]="form.invalid" class="btn btn-primary">{{ producto ? 'Guardar Cambios' : 'Crear' }}</button>
      </div>
    </form>
  </div>
</div>
